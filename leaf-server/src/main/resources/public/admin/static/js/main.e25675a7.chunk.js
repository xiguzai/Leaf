(this["webpackJsonpadmin-ui"]=this["webpackJsonpadmin-ui"]||[]).push([[0],{172:function(e,t,a){e.exports=a(465)},177:function(e,t,a){},207:function(e,t,a){},465:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),r=a(4),l=a.n(r),c=(a(177),a(116),a(113)),o=a.n(c),s=(a(179),a(170)),d=a.n(s),u=(a(63),a(42)),m=a.n(u),p=(a(193),a(115)),g=a.n(p),f=(a(195),a(38)),b=a.n(f),h=(a(197),a(169)),E=a.n(h),y=(a(199),a(44)),T=a.n(y),v=a(45),D=(a(201),a(18)),O=a.n(D),j=(a(205),a(114)),I=a.n(j),k=a(467),x=(a(207),I.a.confirm),S=O.a.create()((function(e){var t=e.data,a=e.setData,r=e.form,l=r.getFieldDecorator,c=r.getFieldValue,o=r.getFieldsValue,s=Object(n.useState)(!1),d=Object(v.a)(s,2),u=d[0],m=d[1],p=Object(n.useState)(!1),g=Object(v.a)(p,2),f=g[0],h=g[1];return i.a.createElement("span",null,i.a.createElement("a",{onClick:function(e){e.preventDefault(),m(!0)}},"Edit"),i.a.createElement(E.a,{type:"vertical"}),i.a.createElement("a",{onClick:function(n){n.preventDefault(),console.log(e.record),x({title:"Do you Want to delete these items?",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){return fetch("/admin/allocs/delete?bizTag=".concat(e.record.bizTag),{method:"POST"}).then((function(e){return e.json()})).then((function(n){if(200===n.status){for(var i=0;i<t.length;i++){if(t[i].bizTag===e.record.bizTag){t.splice(i,1);break}}a(Object.assign([],t)),T.a.success(n.message)}else T.a.error(n.message)}))},onCancel:function(){}})}},"Delete"),i.a.createElement(I.a,{title:"Edit",visible:u,onOk:function(){h(!0);var n=Object.assign(e.record,o());fetch("/admin/allocs/update",{method:"POST",body:JSON.stringify(n),headers:new Headers({"Content-Type":"application/json"})}).then((function(e){return e.json()})).then((function(n){if(200===n.status){for(var i=e.record.bizTag,r=0;r<e.data.length;r++){var l=e.data[r];if(l.bizTag===i){l.description=c("description"),l.updateTime=Object(k.a)(new Date,"yyyy-MM-dd HH:mm:ss");break}}a(Object.assign([],t)),m(!1),T.a.success(n.message)}else T.a.error(n.message);h(!1)}))},onCancel:function(){m(!1)},okButtonProps:{loading:f}},i.a.createElement(O.a,{labelCol:{span:5},wrapperCol:{span:16},onSubmit:function(e){return e.preventDefault()}},i.a.createElement(O.a.Item,{label:"BizTag"},i.a.createElement(b.a,{disabled:!0,value:e.record.bizTag})),i.a.createElement(O.a.Item,{label:"MaxID"},i.a.createElement(b.a,{disabled:!0,value:e.record.maxId})),i.a.createElement(O.a.Item,{label:"Step"},i.a.createElement(b.a,{disabled:!0,value:e.record.step})),i.a.createElement(O.a.Item,{label:"Description"},l("description",{initialValue:e.record.description})(i.a.createElement(b.a,{placeholder:"Description"}))),i.a.createElement(O.a.Item,{label:"UpateTime"},i.a.createElement(b.a,{disabled:!0,value:e.record.updateTime})))))})),w=O.a.create()((function(e){var t=e.createing,a=e.setCreateing,n=e.data,r=e.setData,l=e.loading,c=e.reloading,o=e.setReloading,s=e.fetchData,d=e.form,u=d.getFieldDecorator,p=d.validateFields;return i.a.createElement(O.a,{style:{marginBottom:"0.5em"},layout:"inline",onSubmit:function(e){return e.preventDefault()}},i.a.createElement(O.a.Item,null,u("bizTag",{rules:[{required:!0,message:"Please input BizTag"}]})(i.a.createElement(b.a,{style:{width:"200px"},placeholder:"BizTag"}))),i.a.createElement(O.a.Item,null,u("maxId",{initialValue:1,rules:[{required:!0,message:"Please input MaxID"}]})(i.a.createElement(g.a,{style:{width:"200px"},min:1,placeholder:"MaxID"}))),i.a.createElement(O.a.Item,null,u("step",{initialValue:2e3,rules:[{required:!0,message:"Please input Step"}]})(i.a.createElement(g.a,{style:{width:"200px"},min:1,placeholder:"Step"}))),i.a.createElement(O.a.Item,null,u("description")(i.a.createElement(b.a,{style:{width:"200px"},placeholder:"Description"}))),i.a.createElement(O.a.Item,null,i.a.createElement(m.a,{type:"primary",disabled:l,loading:t,onClick:function(e){e.preventDefault(),p((function(e,t){e||(console.log(t),a(!0),setTimeout((function(){fetch("/admin/allocs/create",{method:"POST",body:JSON.stringify(t),headers:new Headers({"Content-Type":"application/json"})}).then((function(e){return e.json()})).catch((function(e){return console.log("Error:",e)})).then((function(e){console.log("Success:",e),200===e.status?(t.key=t.bizTag,t.updateTime=Object(k.a)(new Date,"yyyy-MM-dd HH:mm:ss"),n.push(t),r(Object.assign([],n)),T.a.success(e.message)):T.a.error(e.message),a(!1)}))}),500))}))},htmlType:"submit"},t?"Createing...":"Create")),i.a.createElement(O.a.Item,null,i.a.createElement(m.a,{type:"default",htmlType:"button",disabled:l,loading:c,onClick:function(e){e.preventDefault(),o(!0),setTimeout((function(){s().then((function(e){200===e.status&&(e.data&&e.data.length>0&&e.data.map((function(e){e.key=e.bizTag})),r(e.data)),o(!1)}))}),500)}},c?"Reloading...":"Reload")))})),z=function(){var e=Object(n.useState)(!0),t=Object(v.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(!1),c=Object(v.a)(l,2),s=c[0],u=c[1],m=Object(n.useState)(!1),p=Object(v.a)(m,2),g=p[0],f=p[1],b=Object(n.useState)(new Array),h=Object(v.a)(b,2),E=h[0],y=h[1],T=[{title:"BizTag",dataIndex:"bizTag",key:"bizTag"},{title:"MaxID",dataIndex:"maxId",key:"maxId"},{title:"Step",dataIndex:"step",key:"step"},{title:"Description",key:"description",dataIndex:"description"},{title:"UpdateTime",key:"updateTime",dataIndex:"updateTime"},{title:"Action",key:"action",render:function(e,t){return i.a.createElement(S,{text:e,record:t,data:E,setData:y})}}],D=function(){return fetch("/admin/allocs").then((function(e){return e.json()}))};return Object(n.useEffect)((function(){setTimeout((function(){D().catch((function(e){return console.log("Error:",e)})).then((function(e){200===e.status&&(e.data&&e.data.length>0&&e.data.map((function(e){e.key=e.bizTag})),y(e.data),r(!1))}))}),500)}),[]),i.a.createElement("div",{className:"App"},i.a.createElement("h1",{style:{paddingTop:"0.5em"}},"Leaf Admin"),i.a.createElement(w,{createing:g,setCreateing:f,data:E,setData:y,loading:a,reloading:s,setReloading:u,fetchData:D}),i.a.createElement(o.a,{tip:"Loading...",spinning:a||s},i.a.createElement(d.a,{columns:T,dataSource:E,pagination:!1})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(i.a.createElement(z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[172,1,2]]]);
//# sourceMappingURL=main.e25675a7.chunk.js.map