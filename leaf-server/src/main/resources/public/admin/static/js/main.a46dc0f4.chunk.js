(this["webpackJsonpadmin-ui"]=this["webpackJsonpadmin-ui"]||[]).push([[0],{121:function(e,t,a){},178:function(e,t,a){e.exports=a(475)},183:function(e,t,a){},475:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),l=a(6),r=a.n(l),c=(a(183),a(120),a(65)),o=a.n(c),s=(a(121),a(87),a(64)),d=a.n(s),u=(a(122),a(86)),m=a.n(u),p=(a(55),a(31)),f=a.n(p),g=(a(199),a(119)),y=a.n(g),b=(a(201),a(41)),h=a.n(b),E=(a(203),a(176)),x=a.n(E),k=(a(205),a(47)),T=a.n(k),v=a(33),I=(a(207),a(19)),O=a.n(I),j=(a(211),a(118)),D=a.n(j),S=a(481),w=D.a.confirm,C=(o.a.TabPane,O.a.create()((function(e){var t=e.data,a=e.setData,l=e.form,r=l.getFieldDecorator,c=l.getFieldValue,o=l.getFieldsValue,s=Object(n.useState)(!1),d=Object(v.a)(s,2),u=d[0],m=d[1],p=Object(n.useState)(!1),f=Object(v.a)(p,2),g=f[0],y=f[1];return i.a.createElement("span",null,i.a.createElement("a",{onClick:function(e){e.preventDefault(),m(!0)}},"Edit"),i.a.createElement(x.a,{type:"vertical"}),i.a.createElement("a",{onClick:function(n){n.preventDefault(),w({title:"Do you Want to delete these items?",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){return fetch("/admin/allocs/delete?bizTag=".concat(e.record.bizTag),{method:"POST"}).then((function(e){return e.json()})).then((function(n){200===n.status?(t.forEach((function(a,n){a.bizTag===e.record.bizTag&&t.splice(n,1)})),a(Object.assign([],t)),T.a.success(n.message)):T.a.error(n.message)}))},onCancel:function(){}})}},"Delete"),i.a.createElement(D.a,{title:"Edit",visible:u,onOk:function(){y(!0);var n=Object.assign(e.record,o());fetch("/admin/allocs/update",{method:"POST",body:JSON.stringify(n),headers:new Headers({"Content-Type":"application/json"})}).then((function(e){return e.json()})).then((function(n){if(200===n.status){for(var i=e.record.bizTag,l=0;l<e.data.length;l++){var r=e.data[l];if(r.bizTag===i){r.description=c("description"),r.updateTime=Object(S.a)(new Date,"yyyy-MM-dd HH:mm:ss");break}}a(Object.assign([],t)),m(!1),T.a.success(n.message)}else T.a.error(n.message);y(!1)}))},onCancel:function(){m(!1)},okButtonProps:{loading:g}},i.a.createElement(O.a,{labelCol:{span:5},wrapperCol:{span:16},onSubmit:function(e){return e.preventDefault()}},i.a.createElement(O.a.Item,{label:"BizTag"},i.a.createElement(h.a,{disabled:!0,value:e.record.bizTag})),i.a.createElement(O.a.Item,{label:"MaxID"},i.a.createElement(h.a,{disabled:!0,value:e.record.maxId})),i.a.createElement(O.a.Item,{label:"Step"},i.a.createElement(h.a,{disabled:!0,value:e.record.step})),i.a.createElement(O.a.Item,{label:"Description"},r("description",{initialValue:e.record.description})(i.a.createElement(h.a,{placeholder:"Description"}))),i.a.createElement(O.a.Item,{label:"UpateTime"},i.a.createElement(h.a,{disabled:!0,value:e.record.updateTime})))))}))),z=O.a.create()((function(e){var t=e.createing,a=e.setCreateing,n=e.data,l=e.setData,r=e.reloading,c=e.setReloading,o=e.fetchData,s=e.form,d=s.getFieldDecorator,u=s.validateFields;return i.a.createElement(O.a,{style:{marginBottom:"0.5em"},layout:"inline",onSubmit:function(e){return e.preventDefault()}},i.a.createElement(O.a.Item,null,d("bizTag",{rules:[{required:!0,message:"Please input BizTag"}]})(i.a.createElement(h.a,{style:{width:"200px"},placeholder:"BizTag"}))),i.a.createElement(O.a.Item,null,d("maxId",{initialValue:1,rules:[{required:!0,message:"Please input MaxID"}]})(i.a.createElement(y.a,{style:{width:"200px"},min:1,placeholder:"MaxID"}))),i.a.createElement(O.a.Item,null,d("step",{initialValue:2e3,rules:[{required:!0,message:"Please input Step"}]})(i.a.createElement(y.a,{style:{width:"200px"},min:1,placeholder:"Step"}))),i.a.createElement(O.a.Item,null,d("description")(i.a.createElement(h.a,{style:{width:"200px"},placeholder:"Description"}))),i.a.createElement(O.a.Item,null,i.a.createElement(f.a,{type:"primary",loading:t,onClick:function(e){e.preventDefault(),u((function(e,t){e||(console.log(t),a(!0),fetch("/admin/allocs/create",{method:"POST",body:JSON.stringify(t),headers:new Headers({"Content-Type":"application/json"})}).then((function(e){return e.json()})).catch((function(e){return console.log("Error:",e)})).then((function(e){console.log("Success:",e),200===e.status?(t.key=t.bizTag,t.updateTime=Object(S.a)(new Date,"yyyy-MM-dd HH:mm:ss"),n.push(t),l(Object.assign([],n)),T.a.success(e.message)):T.a.error(e.message),a(!1)})))}))},htmlType:"submit"},t?"Createing...":"Create")),i.a.createElement(O.a.Item,null,i.a.createElement(f.a,{type:"default",htmlType:"button",loading:r,onClick:function(e){e.preventDefault(),c(!0),setTimeout((function(){o().then((function(){return c(!1)}))}),500)}},r?"Reloading...":"Reload")))})),B=function(){var e=Object(n.useState)(!1),t=Object(v.a)(e,2),a=t[0],l=t[1],r=Object(n.useState)(!1),c=Object(v.a)(r,2),o=c[0],s=c[1],u=Object(n.useState)(new Array),p=Object(v.a)(u,2),f=p[0],g=p[1],y=[{title:"BizTag",dataIndex:"bizTag",key:"bizTag"},{title:"MaxID",dataIndex:"maxId",key:"maxId"},{title:"Step",dataIndex:"step",key:"step"},{title:"Description",key:"description",dataIndex:"description"},{title:"UpdateTime",key:"updateTime",dataIndex:"updateTime"},{title:"Action",key:"action",render:function(e,t){return i.a.createElement(C,{text:e,record:t,data:f,setData:g})}}],b=function(){return fetch("/admin/allocs").then((function(e){return e.json()})).then((function(e){200===e.status&&(e.data&&e.data.length>0&&e.data.map((function(e){e.key=e.bizTag})),g(e.data))}))};return Object(n.useEffect)((function(){b()}),[]),i.a.createElement("div",null,i.a.createElement(z,{createing:o,setCreateing:s,data:f,setData:g,reloading:a,setReloading:l,fetchData:b}),i.a.createElement(d.a,{tip:"Loading...",delay:100,spinning:a},i.a.createElement(m.a,{columns:y,dataSource:f,pagination:!1})))};function M(){var e=Object(n.useState)(new Array),t=Object(v.a)(e,2),a=t[0],l=t[1],r=Object(n.useState)(!1),c=Object(v.a)(r,2),o=c[0],s=c[1],u=function(){return fetch("/admin/cache").then((function(e){return e.json()})).then((function(e){200===e.status&&l(e.data)}))};Object(n.useEffect)((function(){u()}),[]);return i.a.createElement("div",null,i.a.createElement("div",{style:{marginBottom:"0.5em"}},i.a.createElement(f.a,{loading:o,onClick:function(e){e.preventDefault(),s(!0),setTimeout((function(){u().then((function(){return s(!1)}))}),500)}},o?"Reloading":"Reload")),i.a.createElement(d.a,{tip:"Loading...",delay:100,spinning:o},i.a.createElement(m.a,{columns:[{title:"Name",dataIndex:"key",key:"key"},{title:"Init",dataIndex:"initOk",key:"initOk"},{title:"Next",dataIndex:"nextReady",key:"nextReady"},{title:"Pos",key:"pos",dataIndex:"pos"},{title:"Value0",key:"value0",dataIndex:"value0"},{title:"Max0",key:"max0",dataIndex:"max0"},{title:"Step0",key:"step0",dataIndex:"step0"},{title:"Value1",key:"value1",dataIndex:"value1"},{title:"Max1",key:"max1",dataIndex:"max1"},{title:"Step1",key:"step1",dataIndex:"step1"}],dataSource:a,pagination:!1})))}var P=o.a.TabPane,R=function(){return i.a.createElement("div",{className:"App"},i.a.createElement("h1",{style:{paddingTop:"0.5em",marginBottom:0}},"Leaf Admin"),i.a.createElement(o.a,{defaultActiveKey:"Cache"},i.a.createElement(P,{tab:"Cache",key:"Cache"},i.a.createElement(M,null)),i.a.createElement(P,{tab:"DB",key:"DB"},i.a.createElement(B,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[178,1,2]]]);